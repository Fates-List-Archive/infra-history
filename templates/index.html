{% extends "base_index.html" %}

{% block head %}
<style>   
	.btn-outline-light {margin-bottom: 39px !important;}
</style>
{% endblock %}

{% block content %}
    <div class="index-fl">
    <hr class="hr-is">
    <div class="d-flex" style="margin-left: 5%;"><i class="fas fa-question fa-3x white"></i>
        <h4 class="title-is">Random Bot</h4>
    </div>
    <div id="random-section" class="d-flex flex-wrap justify-content-sm-center align-items-sm-center justify-content-md-center justify-content-lg-center div-is">
	    <div id="random-bots"></div> <!-- This is where random bots will be -->
    </div>
    <div id="random-section-bt" class="d-flex flex-wrap justify-content-sm-center align-items-sm-center justify-content-md-center justify-content-lg-center div-is">
	    <button class="btn btn-outline-light text-center" style="display: block;  text-align: center; justify-content: center;" onclick="randomBotRoll()">Roll</button>
    </div>
    <hr class="hr-is">
    <div class="d-flex" style="margin-left: 5%;"><i class="fas fa-certificate fa-3x white"></i>
        <h4 class="title-is">Certified Bots</h4>
    </div>
    <div class="d-flex flex-wrap justify-content-sm-center align-items-sm-center justify-content-md-center justify-content-lg-center div-is" id="tt-2">
        {% for bot in certified_bots %}
        <div class="bot-card">
		<div class="lozad bot-card-banner" data-background-image="{{bot.banner}}">
			<i class="fas fa-certificate fa-3x bot-card-cert"></i>
			<a href="/bot/{{bot.bot_id}}"><img alt="Bot avatar" class="bot-card-avatar" src="{{bot.avatar}}" loading="lazy"></a></div>
		<div>
                <div class="bot-card-username">
                    <h4 class="text-nowrap text-break text-center bot-card-username-txt white-bold">{{bot.username}}</h4>
                </div>
            </div>
            <h6 class="bot-card-description"><strong style="overflow-wrap: anywhere;">{{bot.description}}</strong></h6>
            <div class="d-flex bot-card-footer">
                <div class="bot-card-footer-stats">
                   <p class="text-center white-bold"><i class="fas fa-server i-m3"></i>{{bot.servers}}</p>
                </div>
                <div class="bot-card-footer-stats">
                    <p class="text-center white-bold" ><i class="fas fa-thumbs-up i-m3"></i>{{bot.votes}}</p>
                </div>
            </div>
            <div class="bot-card-actions">
		    <a role="button" aria-label="View" href="/bot/{{bot.bot_id}}" class="btn btn-outline-light bot-card-actions-link" >View</a>
		    <a href="{{bot.invite}}" class="btn btn-outline-light bot-card-actions-link" style="margin-left: 6.5%;" target="_blank" rel="noreferrer" role="button" aria-label="Invite">Invite</a></div>
        </div>
    {% endfor %}
    </div>
    <hr class="hr-is">
    <div class="d-flex" style="margin-left: 5%;"><i class="fas fa-sort-amount-up fa-3x white"></i>
        <h4 class="title-is">Top Voted</h4>
    </div>
    <div class="d-flex flex-wrap justify-content-sm-center align-items-sm-center justify-content-md-center justify-content-lg-center div-is" id="tt-1">
        {% for bot in top_voted %}
            <div class="bot-card">
		<div class="lozad bot-card-banner" data-background-image="{{bot.banner}}">
		{% if bot.certified == True %}
			<i class="fas fa-certificate fa-3x bot-card-cert"></i>
		{% endif %}
		<a href="/bot/{{bot.bot_id}}"><img alt="bot avatar" class="bot-card-avatar" src="{{bot.avatar}}" loading="lazy"/></a></div>
		<div>
                    <div class="bot-card-username">
                        <h4 class="text-nowrap text-break text-center bot-card-username-txt white-bold">{{bot.username}}</h4>
                    </div>
                </div>
                <h6 class="bot-card-description" ><strong style="overflow-wrap: anywhere;">{{bot.description}}</strong></h6>
                <div class="d-flex bot-card-footer">
                    <div class="bot-card-footer-stats">
                        <p class="text-center white-bold"><i class="fas fa-server i-m3"></i>{{bot.servers}}</p>
                    </div>
                    <div class="bot-card-footer-stats">
                        <p class="text-center white-bold"><i class="fas fa-thumbs-up i-m3"></i>{{bot.votes}}</p>
                    </div>
                </div>
            	<div class="bot-card-actions">
                    <a role="button" aria-label="View" href="/bot/{{bot.bot_id}}" class="btn btn-outline-light bot-card-actions-link" >View</a>
                    <a href="{{bot.invite}}" class="btn btn-outline-light bot-card-actions-link" style="margin-left: 6.5%;" target="_blank" rel="noreferrer" role="button" aria-label="Invite">Invite</a></div>
	    	</div>
        {% endfor %}
    </div>
    <hr class="hr-is">
    <div class="d-flex" style="margin-left: 5%;"><i class="fas fa-plus-square fa-3x white"></i>
        <h4 style="color: rgba(255,255,255,0.87);margin-left: 15px;">New Bots</h4>
    </div>
    <div class="d-flex flex-wrap justify-content-sm-center align-items-sm-center justify-content-md-center justify-content-lg-center" id="tt" style="width: 90%;margin: 30px 5%;">
        {% for bot in new_bots %}
            <div class="bot-card">
                <div class="lozad bot-card-banner" data-background-image="{{bot.banner}}">
                {% if bot.certified == True %}
                        <i class="fas fa-certificate fa-3x bot-card-cert"></i>
                {% endif %}
                <a href="/bot/{{bot.bot_id}}"><img alt="bot avatar" class="bot-card-avatar" src="{{bot.avatar}}" loading="lazy"/></a></div>
                <div>
                    <div class="bot-card-username">
                        <h4 class="text-nowrap text-break text-center bot-card-username-txt white-bold">{{bot.username}}</h4>
                    </div>
                </div>
                <h6 class="bot-card-description" ><strong style="overflow-wrap: anywhere;">{{bot.description}}</strong></h6>
                <div class="d-flex bot-card-footer">
                    <div class="bot-card-footer-stats">
                        <p class="text-center white-bold"><i class="fas fa-server i-m3"></i>{{bot.servers}}</p>
                    </div>
                    <div class="bot-card-footer-stats">
                        <p class="text-center white-bold"><i class="fas fa-thumbs-up i-m3"></i>{{bot.votes}}</p>
                    </div>
                </div>
            <div class="bot-card-actions">
                    <a role="button" aria-label="View" href="/bot/{{bot.bot_id}}" class="btn btn-outline-light bot-card-actions-link" >View</a>
                    <a href="{{bot.invite}}" class="btn btn-outline-light bot-card-actions-link" style="margin-left: 6.5%;" target="_blank" rel="noreferrer" role="button" aria-label="Invite">Invite</a></div>
	    </div>
    	{% endfor %}
    </div>
    <script src="/static/assets/js/main.js"></script>


	<script>
		function randomBotRoll(){
			$.get("{{site_url}}{{roll_api}}", function(data, status) {
				random_bots = document.querySelector("#random-bots")
				if(data.banner == "" || data.banner == "none") {
					banner = "/static/assets/img/banner.webp"
				}
				else {
					banner = data.banner
				}
				d = `<div class="bot-card">` // Bot card
				d += `<div class="lozad bot-card-banner" data-background-image="${banner}" style="background-image: url('${banner}');">`; // Banner
		                if(data.certified)
		                        d += '<i class="fas fa-certificate fa-3x bot-card-cert"></i>';
				d += `<a href="/bot/${data.bot_id}"><img alt="bot avatar" class="bot-card-avatar" src="${data.avatar}" loading="lazy"/></a></div>`
			        d += `<div>
		                    <div class="bot-card-username">
                		        <h4 class="text-nowrap text-break text-center bot-card-username-txt white-bold">${data.username}</h4>
		                    </div>
                		</div>` // Username
		                d += `<h6 class="bot-card-description" ><strong style="overflow-wrap: anywhere;">${data.description}</strong></h6>` // Description
                		d += `<div class="d-flex bot-card-footer">
		                    <div class="bot-card-footer-stats">
                		        <p class="text-center white-bold"><i class="fas fa-server i-m3"></i>${data.servers}</p>
		                    </div>` // Servers
                	        d += `<div class="bot-card-footer-stats">
                        		<p class="text-center white-bold"><i class="fas fa-thumbs-up i-m3"></i>${data.votes}</p>
		                    </div>
				</div>` // Votes
				d += `<div class="bot-card-actions">
		        	            <a role="button" aria-label="View" href="/bot/${data.bot_id}" class="btn btn-outline-light bot-card-actions-link" >View</a>
                			    <a href="${data.invite}" class="btn btn-outline-light bot-card-actions-link" style="margin-left: 6.5%;" target="_blank" rel="noreferrer" role="button" aria-label="Invite">Invite</a></div>
		                	</div>`; 
				random_bots.innerHTML = d;
			})
		}
	window.addEventListener("load", randomBotRoll())
	</script>
{% endblock %}
{% block footer %}

{% endblock %}

